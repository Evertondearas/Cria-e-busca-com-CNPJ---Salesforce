<template>
    <lightning-card title="Busca de Empresa por CNPJ" icon-name="standard:account">
        <div class="slds-m-around_medium">
            
            <template lwc:if={mostrarFormulario}>
                <lightning-input
                    label={cnpj}
                    onchange={handleCnpjChange}
                    value={CNPJInput}
                    type="text"
                    placeholder="Digite o CNPJ">
                </lightning-input>

                <div class="slds-m-top_medium">
                    <lightning-button
                        label="Buscar"
                        onclick={handleBuscarClick}
                        variant="brand">
                    </lightning-button>
                </div>
            </template>
            
            <template lwc:if={empresa}>
                <div class="slds-box slds-m-top_medium slds-theme_info slds-text-color_inverse" style="background-color: #0070d2; color: white; padding: 1rem;">
                    <p><strong>Nome:</strong> {empresa.nome}</p>
                    <p><strong>Fantasia:</strong> {empresa.fantasia}</p>
                    <p><strong>CNPJ:</strong> {empresa.cnpj}</p>
                    <p><strong>Situação:</strong> {empresa.situacao}</p>
                    <p><strong>Abertura:</strong> {empresa.abertura}</p>
                    <p><strong>Tipo:</strong> {empresa.tipo}</p>
                    <p><strong>Natureza Jurídica:</strong> {empresa.natureza_juridica}</p>
                    <p><strong>Endereço:</strong> {empresa.numero}, {empresa.bairro}, {empresa.municipio} - {empresa.uf}</p>
                    <p><strong>Email:</strong> {empresa.email}</p>
                    <p><strong>Telefone:</strong> {empresa.telefone}</p>
                    <p><strong>Status:</strong> {empresa.status}</p>
                </div>

                <lightning-layout class="slds-m-top_medium">
                    <lightning-layout-item flexibility="auto"></lightning-layout-item>
                    <lightning-layout-item>
                        <lightning-button
                            label="Limpar"
                            onclick={limparPesquisa}
                            variant="neutral">
                        </lightning-button>
                    </lightning-layout-item>
                </lightning-layout>
            </template>

            <template lwc:if={error}>
                <div class="slds-m-top_medium slds-notify slds-notify_alert slds-theme_error" role="alert">
                    <span class="slds-assistive-text">Erro</span>
                    <lightning-icon icon-name="utility:error" alternative-text="Erro" size="small" class="slds-m-right_x-small"></lightning-icon>
                    <h2>{error}</h2>
                </div>
            </template>
        </div>
    </lightning-card>
</template>
